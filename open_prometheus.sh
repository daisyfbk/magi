#!/bin/bash

[[ -n $PROMETHEUS_HOST ]] || exit 1

# open "http://$PROMETHEUS_HOST:9090/graph?g0.expr=100%20-%20(avg%20by%20(instance)%20(rate(node_cpu_seconds_total%7Bmode%3D%22idle%22%7D%5B2s%5D))%20*%20100)&g0.tab=0&g0.stacked=0&g0.show_exemplars=0&g0.range_input=15m&g1.expr=max%20by(instance)%20(rate(node_network_receive_bytes_total%5B2s%5D))&g1.tab=0&g1.stacked=0&g1.show_exemplars=0&g1.range_input=30m&g2.expr=max%20by(instance)%20(rate(node_network_transmit_bytes_total%5B2s%5D))&g2.tab=0&g2.stacked=0&g2.show_exemplars=0&g2.range_input=15m&g3.expr=max%20by(instance)%20(rate(node_disk_read_bytes_total%5B10s%5D))&g3.tab=0&g3.stacked=0&g3.show_exemplars=0&g3.range_input=15m&g4.expr=max%20by(instance)%20(rate(node_disk_written_bytes_total%5B10s%5D))&g4.tab=0&g4.stacked=0&g4.show_exemplars=0&g4.range_input=15m&g5.expr=100%20*%20(1%20-%20node_memory_MemAvailable_bytes%2Fnode_memory_MemTotal_bytes)&g5.tab=0&g5.stacked=0&g5.show_exemplars=0&g5.range_input=20m&g6.expr=sum%20by(mode)%20(rate(node_cpu_seconds_total%7Binstance%3D~%22(localhost(.*))%22%7D%5B10s%5D))&g6.tab=0&g6.stacked=1&g6.show_exemplars=0&g6.range_input=15m&g7.expr=&g7.tab=1&g7.stacked=0&g7.show_exemplars=0&g7.range_input=1h"

open "http://${PROMETHEUS_HOST}:9090/graph?g0.expr=100%20-%20(avg%20by%20(instance)%20(rate(node_cpu_seconds_total%7Bmode%3D%22idle%22%7D%5B2s%5D))%20*%20100)&g0.tab=0&g0.display_mode=lines&g0.show_exemplars=0&g0.range_input=15m&g1.expr=max%20by(instance)%20(rate(node_network_receive_bytes_total%5B2s%5D))&g1.tab=0&g1.display_mode=lines&g1.show_exemplars=0&g1.range_input=30m&g2.expr=max%20by(instance)%20(rate(node_network_transmit_bytes_total%5B2s%5D))&g2.tab=0&g2.display_mode=lines&g2.show_exemplars=0&g2.range_input=15m&g3.expr=max%20by(instance)%20(rate(node_disk_read_bytes_total%5B10s%5D))&g3.tab=0&g3.display_mode=lines&g3.show_exemplars=0&g3.range_input=15m&g4.expr=max%20by(instance)%20(rate(node_disk_written_bytes_total%5B10s%5D))&g4.tab=0&g4.display_mode=lines&g4.show_exemplars=0&g4.range_input=15m&g5.expr=100%20*%20(1%20-%20node_memory_MemAvailable_bytes%2Fnode_memory_MemTotal_bytes)&g5.tab=0&g5.display_mode=lines&g5.show_exemplars=0&g5.range_input=20m"
